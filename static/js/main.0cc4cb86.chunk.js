(this["webpackJsonpreact-2048"]=this["webpackJsonpreact-2048"]||[]).push([[0],{323:function(e,t,i){},324:function(e,t,i){},331:function(e,t){},332:function(e,t){},340:function(e,t){},350:function(e,t){},351:function(e,t){},352:function(e,t){},360:function(e,t){},525:function(e,t,i){"use strict";i.r(t);var s=i(70),n=i.n(s),a=i(274),r=i.n(a),o=i(4),l=i(9),c=i(12),u=i(13),d=(i(323),i(324),i(3)),h=i.n(d),b=i(11),m=i(43),v=i(32),f=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var s;return Object(o.a)(this,i),(s=t.call(this,e)).button1=s.button1.bind(Object(m.a)(s)),s.button2=s.button2.bind(Object(m.a)(s)),s.button3=s.button3.bind(Object(m.a)(s)),s.button4=s.button4.bind(Object(m.a)(s)),s}return Object(l.a)(i,[{key:"button1",value:function(){this.props.handler1()}},{key:"button2",value:function(){this.props.handler2()}},{key:"button3",value:function(){this.props.handler3()}},{key:"button4",value:function(){this.props.handler4()}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"all",children:[Object(v.jsx)("div",{id:"Title",children:"REACT 2048 With AI (Reinforcemnt Learning)"}),Object(v.jsx)("div",{className:"Points",children:this.props.points}),Object(v.jsx)("div",{className:"Points",children:this.props.reward}),Object(v.jsxs)("div",{id:"grid",children:[Object(v.jsx)("div",{class:"cell",id:"cell_1",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[0][0]})}),Object(v.jsx)("div",{class:"cell",id:"cell_2",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[0][1]})}),Object(v.jsx)("div",{class:"cell",id:"cell_3",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[0][2]})}),Object(v.jsx)("div",{class:"cell",id:"cell_4",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[0][3]})}),Object(v.jsx)("div",{class:"cell",id:"cell_5",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[1][0]})}),Object(v.jsx)("div",{class:"cell",id:"cell_6",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[1][1]})}),Object(v.jsx)("div",{class:"cell",id:"cell_7",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[1][2]})}),Object(v.jsx)("div",{class:"cell",id:"cell_8",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[1][3]})}),Object(v.jsx)("div",{class:"cell",id:"cell_9",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[2][0]})}),Object(v.jsx)("div",{class:"cell",id:"cell_10",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[2][1]})}),Object(v.jsx)("div",{class:"cell",id:"cell_11",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[2][2]})}),Object(v.jsx)("div",{class:"cell",id:"cell_12",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[2][3]})}),Object(v.jsx)("div",{class:"cell",id:"cell_13",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[3][0]})}),Object(v.jsx)("div",{class:"cell",id:"cell_14",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[3][1]})}),Object(v.jsx)("div",{class:"cell",id:"cell_15",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[3][2]})}),Object(v.jsx)("div",{class:"cell",id:"cell_16",children:Object(v.jsx)("div",{className:"internalCell",children:this.props.grid[3][3]})})]}),Object(v.jsxs)("div",{class:"Buttons",children:[Object(v.jsx)("div",{id:"Button1",onClick:function(){return e.button1()},children:"test1"}),Object(v.jsx)("div",{id:"Button2",onClick:function(){return e.button2()},children:"test2"}),Object(v.jsx)("div",{id:"Button3",onClick:function(){return e.button3()},children:"test3"}),Object(v.jsx)("div",{id:"Button4",onClick:function(){return e.button4()},children:"Restart Game"})]}),Object(v.jsx)("div",{className:"State",children:this.props.state})]})}}]),i}(n.a.Component),p=i(99),g=function(){function e(t,i,s,n){Object(o.a)(this,e),this.numStates=i,this.numActions=s,this.batchSize=n,t instanceof p.a?(this.network=t,this.network.summary(),this.network.compile({optimizer:"adam",loss:"meanSquaredError"})):this.defineModel(t)}return Object(l.a)(e,[{key:"defineModel",value:function(e){var t=this;Array.isArray(e)||(e=[e]),this.network=p.c(),e.forEach((function(e,i){t.network.add(p.b.dense({units:e,activation:"relu",inputShape:0===i?[t.numStates]:void 0}))})),this.network.add(p.b.dense({units:this.numActions})),this.network.summary(),this.network.compile({optimizer:"adam",loss:"meanSquaredError"})}},{key:"predict",value:function(e){var t=this;return p.e((function(){return t.network.predict(e)}))}},{key:"train",value:function(){var e=Object(b.a)(h.a.mark((function e(t,i){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.network.fit(t,i);case 2:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"chooseAction",value:function(e,t){var i=this;return Math.random()<t?Math.floor(Math.random()*this.numActions):p.e((function(){return i.network.predict(e).argMax(1).dataSync()[0]}))}}]),e}(),j=i(295),y=function(){function e(t){Object(o.a)(this,e),this.maxMemory=t,this.samples=new Array}return Object(l.a)(e,[{key:"addSample",value:function(e){this.sample.push(e),this.samples.length>this.maxMemory&&this.samples.shift()}},{key:"sample",value:function(e){return Object(j.sampleSize)(this.samples,e)}}]),e}(),k=function(){function e(t){Object(o.a)(this,e),this.size=t}return Object(l.a)(e,[{key:"new_game",value:function(){for(var e=[],t=0;t<this.size;t++){for(var i=[],s=0;s<this.size;s++)i.push(0);e.push(i)}return e}},{key:"count_point",value:function(e){for(var t=0,i=0,s=0;s<this.size;s++)for(var n=0;n<this.size;n++)(i=Math.floor(Math.sqrt(e[s][n])))>1&&(t+=(i-1)*e[s][n]);return t}},{key:"get_max_cell",value:function(e){for(var t=0,i=0;i<this.size;i++)for(var s=0;s<this.size;s++)t<e[i][s]&&(t=e[i][s]);return t}},{key:"add_two",value:function(e){for(var t=Math.floor(Math.random()*this.size),i=Math.floor(Math.random()*this.size);0!==e[t][i];)t=Math.floor(Math.random()*this.size),i=Math.floor(Math.random()*this.size);return e[t][i]=2,e}},{key:"game_state",value:function(e){for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)if(2048===e[t][i])return"win";for(t=0;t<this.size;t++)for(i=0;i<this.size;i++)if(0===e[t][i])return"not over";for(t=0;t<this.size-1;t++)for(i=0;i<this.size-1;i++)if(e[t][i]===e[t+1][i]||e[t][i+1]===e[t][i])return"not over";for(t=0;t<this.size-1;t++)if(e[this.size-1][t+1]===e[this.size-1][t])return"not over";for(t=0;t<this.size-1;t++)if(e[t][this.size-1]===e[t+1][this.size-1])return"not over";return"lose"}},{key:"reverse",value:function(e){for(var t=[],i=0;i<this.size;i++){t.push([]);for(var s=0;s<this.size;s++)t[i].push(e[i][this.size-s-1])}return t}},{key:"transpose",value:function(e){for(var t=[],i=0;i<this.size;i++){t.push([]);for(var s=0;s<this.size;s++)t[i].push(e[s][i])}return t}},{key:"cover_up",value:function(e){for(var t=this.new_game(this.size),i=!1,s=0;s<this.size;s++)for(var n=0,a=0;a<this.size;a++)0!==e[s][a]&&(t[s][n]=e[s][a],a!==n&&(i=!0),n++);return[t,i]}},{key:"merge",value:function(e){for(var t=!1,i=0;i<this.size;i++)for(var s=0;s<this.size-1;s++)e[i][s]==e[i][s+1]&&0!=e[i][s]&&(e[i][s]*=2,e[i][s+1]=0,t=!0);return[e,t]}},{key:"up",value:function(e){e=this.transpose(e);var t=this.cover_up(e);e=t[0];var i=t[1],s=this.merge(e);return e=s[0],i=i||s[1],e=this.cover_up(e)[0],[e=this.transpose(e),i]}},{key:"down",value:function(e){e=this.reverse(this.transpose(e));var t=this.cover_up(e);e=t[0];var i=t[1],s=this.merge(e);return e=s[0],i=i||s[1],e=this.cover_up(e)[0],[e=this.transpose(this.reverse(e)),i]}},{key:"left",value:function(e){var t=this.cover_up(e);e=t[0];var i=t[1],s=this.merge(e);return e=s[0],i=i||s[1],[e=this.cover_up(e)[0],i]}},{key:"right",value:function(e){e=this.reverse(e);var t=this.cover_up(e);e=t[0];var i=t[1],s=this.merge(e);return e=s[0],i=i||s[1],e=this.cover_up(e)[0],[e=this.reverse(e),i]}},{key:"changeCellsColor",value:function(){for(var e=1;e<=this.size*this.size;e++){var t=document.getElementById("cell_"+e),i=t.children[0].innerHTML;"0"===i&&(t.style.background="rgba(19, 60, 85)"),"2"===i&&(t.style.background="rgba(56, 111, 164)"),"4"===i&&(t.style.background="rgba(89, 165, 216)"),"8"===i&&(t.style.background="rgba(130, 205, 236)"),"16"===i&&(t.style.background="rgba(145, 229, 246)"),"32"===i&&(t.style.background="rgba(19, 94, 85)"),"64"===i&&(t.style.background="rgba(56, 154, 128)"),"128"===i&&(t.style.background="rgba(89, 201, 170)"),"256"===i&&(t.style.background="rgba(162, 238, 201)"),"512"===i&&(t.style.background="rgba(162, 255, 194)"),"1024"===i&&(t.style.background="yellow"),"2048"===i&&(t.style.background="yellow"),"4096"===i&&(t.style.background="yellow"),"8192"===i&&(t.style.background="yellow"),"16384"===i&&(t.style.background="yellow"),"32768"===i&&(t.style.background="yellow"),"65536"===i&&(t.style.background="yellow"),"131072"===i&&(t.style.background="yellow")}}}]),e}(),O=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var s;return Object(o.a)(this,i),(s=t.call(this,e)).state={grid:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],points:0,reward:0,game_state:"not over",model:new g(16,16,3,0),memory:new y(1e4)},s.test1=s.test1.bind(Object(m.a)(s)),s.test2=s.test2.bind(Object(m.a)(s)),s.test3=s.test3.bind(Object(m.a)(s)),s.test4=s.test4.bind(Object(m.a)(s)),s.onKeyPressed=s.onKeyPressed.bind(Object(m.a)(s)),s.GameLogic=new k(4),s.run=s.run.bind(Object(m.a)(s)),s.rewardStore=[],s.maxCellStore=[],s}return Object(l.a)(i,[{key:"test1",value:function(){this.run()}},{key:"test2",value:function(){}},{key:"test3",value:function(){}},{key:"test4",value:function(){var e=this.add_two(this.new_game(this.state.size));this.setState({grid:e})}},{key:"chooseAction",value:function(){var e=Math.floor(4*Math.random());console.log(e),0===e&&this.onKeyPressed("up"),1===e&&this.onKeyPressed("down"),2===e&&this.onKeyPressed("left"),3===e&&this.onKeyPressed("right")}},{key:"stateToArray",value:function(){for(var e=this.state.grid,t=[],i=0;i<e.length;i++)for(var s=0;s<e[i].length;s++)t.push(e[i][s]);return p.d([t])}},{key:"timeout",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"run",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,i,s,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,i=performance.now();case 2:if(!(t<1e4)){e.next=19;break}return this.state.points,this.state.grid,this.state.game_state,e.next=8,this.state.model.chooseAction(this.stateToArray(),1);case 8:return s=e.sent,e.next=11,this.onKeyPressed(s);case 11:this.state.reward,this.state.game_state,this.state.grid,"lose"!==this.state.game_state&&"win"!==this.state.game_state||(this.rewardStore.push(this.state.points),this.maxCellStore.push(this.GameLogic.get_max_cell(this.state.grid)),this.reset(4)),++t%1e3===0&&console.log(t),e.next=2;break;case 19:n=performance.now(),console.log("Call to doSomething took "+(n-i)+" milliseconds."),console.log(this.rewardStore),console.log(this.maxCellStore);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(e){this.setState({grid:this.GameLogic.add_two(this.GameLogic.new_game(this.state.size))})}},{key:"onKeyPressed",value:function(e){var t=null;if("w"!==e.key&&"ArrowUp"!==e.key&&"up"!==e&&0!==e||(t=this.GameLogic.up(this.state.grid)),"a"!==e.key&&"ArrowLeft"!==e.key&&"left"!==e&&1!==e||(t=this.GameLogic.left(this.state.grid)),"s"!==e.key&&"ArrowDown"!==e.key&&"down"!==e&&2!==e||(t=this.GameLogic.down(this.state.grid)),"d"!==e.key&&"ArrowRight"!==e.key&&"right"!==e&&3!==e||(t=this.GameLogic.right(this.state.grid)),this.setState({grid:t[0]}),this.GameLogic.changeCellsColor(),t[1]){var i=this.state.points,s=this.GameLogic.count_point(this.state.grid),n=s-i;this.setState({reward:n}),this.setState({points:s}),this.setState({grid:this.GameLogic.add_two(t[0])}),this.setState({game_state:this.GameLogic.game_state(this.state.grid)})}else this.setState({game_state:this.GameLogic.game_state(this.state.grid)}),"win"==this.state.game_state&&console.log("You Win!"),"lose"==this.state.game_state&&console.log("You Lose!")}},{key:"componentDidMount",value:function(){this.setState({grid:this.GameLogic.add_two(this.state.grid)})}},{key:"componentDidUpdate",value:function(){this.GameLogic.changeCellsColor()}},{key:"render",value:function(){return Object(v.jsx)("div",{tabIndex:"-1",onKeyDown:this.onKeyPressed,className:"all2",children:Object(v.jsx)(f,{grid:this.state.grid,reward:this.state.reward,points:this.state.points,state:this.state.state,ref:this.gridRef,handler1:this.test1,handler2:this.test2,handler3:this.test3,handler4:this.test4})})}}]),i}(n.a.Component),w=i(296),x=i.n(w),_=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){var s;return Object(o.a)(this,i),(s=t.call(this,e)).particlesInit=s.particlesInit.bind(Object(m.a)(s)),s.particlesLoaded=s.particlesLoaded.bind(Object(m.a)(s)),s}return Object(l.a)(i,[{key:"particlesInit",value:function(e){console.log(e)}},{key:"particlesLoaded",value:function(e){console.log(e)}},{key:"render",value:function(){return Object(v.jsx)(x.a,{id:"tsparticles",init:this.particlesInit,loaded:this.particlesLoaded,height:1.2*window.outerHeight,options:{autoPlay:!0,background:{color:{value:"#232741"}},backgroundMask:{composite:"destination-out",cover:{color:{value:"#fff"},opacity:1},enable:!1},fullScreen:{enable:!0,zIndex:1},detectRetina:!0,fpsLimit:60,infection:{cure:!1,delay:0,enable:!1,infections:0,stages:[]},interactivity:{detectsOn:"canvas",events:{onClick:{enable:!0,mode:"repulse"},onDiv:{selectors:[],enable:!1,mode:[],type:"circle"},onHover:{enable:!0,mode:"bubble",parallax:{enable:!1,force:2,smooth:10}},resize:!0},modes:{attract:{distance:200,duration:.4,speed:1},bounce:{distance:200},bubble:{distance:250,duration:2,opacity:0,size:0},connect:{distance:80,links:{opacity:.5},radius:60},grab:{distance:400,links:{blink:!1,consent:!1,opacity:1}},light:{area:{gradient:{start:{value:"#ffffff"},stop:{value:"#000000"}},radius:1e3},shadow:{color:{value:"#000000"},length:2e3}},push:{quantity:4},remove:{quantity:2},repulse:{distance:400,duration:.4,speed:1},slow:{factor:3,radius:200},trail:{delay:1,quantity:1}}},manualParticles:[],motion:{disable:!1,reduce:{factor:4,value:!0}},particles:{bounce:{horizontal:{random:{enable:!1,minimumValue:.1},value:1},vertical:{random:{enable:!1,minimumValue:.1},value:1}},collisions:{bounce:{horizontal:{random:{enable:!1,minimumValue:.1},value:1},vertical:{random:{enable:!1,minimumValue:.1},value:1}},enable:!1,mode:"bounce",overlap:{enable:!0,retries:0}},color:{value:"#ffffff",animation:{h:{count:0,enable:!1,offset:0,speed:1,sync:!0},s:{count:0,enable:!1,offset:0,speed:1,sync:!0},l:{count:0,enable:!1,offset:0,speed:1,sync:!0}}},life:{count:0,delay:{random:{enable:!1,minimumValue:0},value:0,sync:!1},duration:{random:{enable:!1,minimumValue:1e-4},value:0,sync:!1}},links:{blink:!1,color:{value:"#ffffff"},consent:!1,distance:150,enable:!1,frequency:1,opacity:.4,shadow:{blur:5,color:{value:"#00ff00"},enable:!1},triangles:{enable:!1,frequency:1},width:1,warp:!1},move:{angle:{offset:45,value:90},attract:{enable:!1,rotate:{x:600,y:600}},decay:0,distance:0,direction:"none",drift:0,enable:!0,gravity:{acceleration:9.81,enable:!1,maxSpeed:50},path:{clamp:!0,delay:{random:{enable:!1,minimumValue:0},value:0},enable:!1},outModes:{default:"out",bottom:"out",left:"out",right:"out",top:"out"},random:!0,size:!1,speed:1,straight:!1,trail:{enable:!1,length:10,fillColor:{value:"#000000"}},vibrate:!1,warp:!1},number:{density:{enable:!0,area:800,factor:1e3},limit:0,value:160},opacity:{random:{enable:!0,minimumValue:.1},value:{min:0,max:1},animation:{count:0,enable:!0,speed:1,sync:!1,destroy:"none",minimumValue:0,startValue:"random"}},reduceDuplicates:!1,rotate:{random:{enable:!1,minimumValue:0},value:{min:0,max:360},animation:{enable:!1,speed:0,sync:!1},direction:"clockwise",path:!1},shadow:{blur:0,color:{value:"#000000"},enable:!1,offset:{x:0,y:0}},shape:{options:{},type:"circle"},size:{random:{enable:!0,minimumValue:1},value:{min:1,max:3},animation:{count:0,enable:!1,speed:4,sync:!1,destroy:"none",minimumValue:.3,startValue:"random"}},stroke:{width:0},twinkle:{lines:{enable:!1,frequency:.05,opacity:1},particles:{enable:!1,frequency:.05,opacity:1}}},pauseOnBlur:!0,pauseOnOutsideViewport:!0,responsive:[],themes:[]}})}}]),i}(n.a.Component),z=function(e){Object(c.a)(i,e);var t=Object(u.a)(i);function i(e){return Object(o.a)(this,i),t.call(this,e)}return Object(l.a)(i,[{key:"render",value:function(){return Object(v.jsxs)("div",{id:"App",children:[Object(v.jsx)(_,{className:"particelsAsBackground"}),Object(v.jsx)("div",{id:"App2",children:Object(v.jsx)(O,{className:"Game"})})]})}}]),i}(n.a.Component);r.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(z,{})}),document.getElementById("root"))}},[[525,1,2]]]);
//# sourceMappingURL=main.0cc4cb86.chunk.js.map